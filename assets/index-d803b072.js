import{b as x,o as A,g as m,d as O,t as v,s as _,e as T,a as h,i as g,c as f,f as k,r as X,h as N}from"./entry-client-f257d7b0.js";const Y="#FF0800",P="#000000",[j,z]=x(Y),[H,q]=x(P),F=t=>{const l=$();l&&(l.strokeStyle=t)},V=(t=H())=>F(t),G=(t=j())=>F(t),K=v('<div class="relative flex justify-center"><div class="absolute image-prompt">Upload an image to begin</div><canvas id="main-canvas">Image canvas not loaded'),p="main-canvas",B=t=>({mouseX:t.offsetX,mouseY:t.offsetY}),[L,D]=x(null),I=()=>L()!==null,[W,R]=x([]),[$,Z]=x(null),[J,Q]=x(null),tt=()=>{const t=document.querySelector(`#${p}`),l=t.getBoundingClientRect(),n=t?.getContext("2d");Z(n),Q(l);const e=a=>{if(a.target.id!==p)return;const{mouseX:c,mouseY:d}=B(a);D([c,d]),t.style.cursor="crosshair"},o=a=>{if(a.target.id!==p||!I())return;const{mouseX:c,mouseY:d}=B(a),[r,u]=L(),C=Math.abs(c-r),S=Math.abs(d-u);if(!(C<=10||S<=10))return t.style.cursor="default",R(y=>[...y,{startX:r,startY:u,width:c-r,height:d-u}]),b(),D(null)},s=a=>{if(a.target.id!=p||!I())return;b();const{mouseX:c,mouseY:d}=B(a),[r,u]=L();n.save(),n.beginPath(),G(),n.setLineDash([6]),n.strokeRect(r,u,c-r,d-u),n.restore()},i=a=>{a.code==="Escape"&&(D(null),b(),t.style.cursor="default")};t.addEventListener("mousemove",s,!1),t.addEventListener("mousedown",e,!1),t.addEventListener("mouseup",o,!1),window.addEventListener("keydown",i,!1)},et={width:500,height:300,imgData:null},[w,nt]=x(et),st=()=>{const t=document.querySelector("#upload-input"),l=n=>{if(n.target.files.length===0)return;const e=$();if(!e)return;const o=n.target.files[0],s=new Image;s.onload=()=>{nt({width:s.width,height:s.height,imgData:s}),e.drawImage(s,0,0)},s.src=URL.createObjectURL(o)};t.addEventListener("change",l)},b=()=>{const t=$(),l=J();if(!t||!l)return;const{imgData:n}=w();if(!n)return console.error("no image data in redrawAllBoxes");t.clearRect(0,0,l.width,l.height),t.drawImage(n,0,0),W().forEach(e=>{t.beginPath(),t.rect(e.startX,e.startY,e.width,e.height),V(),t.stroke()})},lt=()=>{const t=$();t&&(t.reset(),R([]))},at=()=>{$()&&(R(t=>t.slice(0,t.length-1)),b())},ot=()=>{$()},it=()=>(A(()=>tt()),A(()=>st()),(()=>{const t=m(K),l=t.firstChild,n=l.nextSibling;return O(e=>{const o=w().width,s=w().height,i="relative rounded-md"+w().imgData?"canvas-shadow-active":"canvas-shadow-inactive";return o!==e._v$&&_(n,"width",e._v$=o),s!==e._v$2&&_(n,"height",e._v$2=s),i!==e._v$3&&T(n,e._v$3=i),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()),rt=v('<svg fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" height="1em" width="1em" style="overflow:visible;"><path d="M8 1a7.979 7.979 0 0 0-5.657 2.343L0 1v6h6L3.757 4.757a6 6 0 1 1 8.211 8.743l1.323 1.5A8 8 0 0 0 8 1z">'),ct=v('<svg fill="currentColor" stroke-width="0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="1em" width="1em" style="overflow:visible;"><path d="M12 16c1.671 0 3-1.331 3-3s-1.329-3-3-3-3 1.331-3 3 1.329 3 3 3z"></path><path d="M20.817 11.186a8.94 8.94 0 0 0-1.355-3.219 9.053 9.053 0 0 0-2.43-2.43 8.95 8.95 0 0 0-3.219-1.355 9.028 9.028 0 0 0-1.838-.18V2L8 5l3.975 3V6.002c.484-.002.968.044 1.435.14a6.961 6.961 0 0 1 2.502 1.053 7.005 7.005 0 0 1 1.892 1.892A6.967 6.967 0 0 1 19 13a7.032 7.032 0 0 1-.55 2.725 7.11 7.11 0 0 1-.644 1.188 7.2 7.2 0 0 1-.858 1.039 7.028 7.028 0 0 1-3.536 1.907 7.13 7.13 0 0 1-2.822 0 6.961 6.961 0 0 1-2.503-1.054 7.002 7.002 0 0 1-1.89-1.89A6.996 6.996 0 0 1 5 13H3a9.02 9.02 0 0 0 1.539 5.034 9.096 9.096 0 0 0 2.428 2.428A8.95 8.95 0 0 0 12 22a9.09 9.09 0 0 0 1.814-.183 9.014 9.014 0 0 0 3.218-1.355 8.886 8.886 0 0 0 1.331-1.099 9.228 9.228 0 0 0 1.1-1.332A8.952 8.952 0 0 0 21 13a9.09 9.09 0 0 0-.183-1.814z">'),dt=v('<div class="flex flex-col items-center"><input type="color"><label class="text-neutral-500">'),ut=v('<button class="tool-button cursor-pointer"><!#><!/><label class="text-neutral-500 hover:text-sky-600 cursor-pointer">'),gt=v('<div class="text-white text-md flex justify-center gap-4 items-start"><!#><!/><!#><!/><div class="mt-4 gap-4 flex text-center"><input type="file" accept="image/*" id="upload-input" class="w-32"></div><!#><!/><!#><!/>'),ft=()=>m(rt),ht=({cls:t})=>(()=>{const l=m(ct);return _(l,"class",t),l})(),M=({id:t,label:l,onChange:n,defaultColor:e})=>(()=>{const o=m(dt),s=o.firstChild,i=s.nextSibling;return k(s,"change",n),_(s,"id",t),_(s,"name",t),s.value=e,_(i,"for",t),g(i,l),o})(),U=({icon:t,label:l,onClick:n})=>(()=>{const e=m(ut),o=e.firstChild,[s,i]=h(o.nextSibling),a=s.nextSibling;return k(e,"click",n,!0),g(e,t,s,i),g(a,l),X(),e})(),xt=()=>(()=>{const t=m(gt),l=t.firstChild,[n,e]=h(l.nextSibling),o=n.nextSibling,[s,i]=h(o.nextSibling),a=s.nextSibling,c=a.firstChild,d=a.nextSibling,[r,u]=h(d.nextSibling),C=r.nextSibling,[S,y]=h(C.nextSibling);return g(t,f(M,{id:"drawing-color",label:"Drawing",defaultColor:Y,onChange:E=>z(E.target.value)}),n,e),g(t,f(M,{id:"box-color",label:"Box",defaultColor:P,onChange:E=>q(E.target.value)}),s,i),k(c,"click",ot,!0),g(t,f(U,{get icon(){return f(ft,{})},label:"Undo",onClick:at}),r,u),g(t,f(U,{get icon(){return f(ht,{cls:"text-lg"})},label:"Reset",onClick:lt}),S,y),X(),t})();N(["click"]);const mt=v('<div class="text-center flex flex-col items-center flex-auto"><main class="flex flex-col"><div class="flex flex-col mb-24"><h1 class="max-6-xs text-6xl text-sky-700 font-thin uppercase my-4">Capstone</h1><p class="text-md text-neutral-500">Tips</p><ul class="mb-8"><li class="basic-text">- Press ctrl + Z to undo last box</li><li class="basic-text">- Press Esc to stop drawing</li></ul><!#><!/></div><!#><!/>');function _t(){return(()=>{const t=m(mt),l=t.firstChild,n=l.firstChild,e=n.firstChild,o=e.nextSibling,s=o.nextSibling,i=s.nextSibling,[a,c]=h(i.nextSibling),d=n.nextSibling,[r,u]=h(d.nextSibling);return g(n,f(xt,{}),a,c),g(l,f(it,{}),r,u),t})()}export{_t as default};
